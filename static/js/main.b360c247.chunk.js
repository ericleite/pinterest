(this.webpackJsonppinterest=this.webpackJsonppinterest||[]).push([[0],{21:function(e,t,n){e.exports={app:"App_app__3BT4Y"}},25:function(e,t,n){e.exports=n(50)},30:function(e,t,n){},4:function(e,t,n){e.exports={COLUMN_SPACING:"16px",MAX_PIN_HEIGHT:"600px",MAX_PIN_WIDTH:"296px",dashboard:"Dashboard_dashboard__3-njO",column:"Dashboard_column__3a0jo",pin:"Dashboard_pin__38wJl"}},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),i=n.n(c),o=(n(30),n(2)),s=n.n(o),u=n(5),p=n(16),l=n(17),d=n(23),f=n(18),h=n(24),v=n(19),m=n(3);function b(e){}var g=n(22);function w(e){return e&&e.clientWidth||0}var x=n(4),j=n.n(x),O=parseInt(j.a.MAX_PIN_HEIGHT,10),P=parseInt(j.a.MAX_PIN_WIDTH,10);function E(e){var t=e.pins,n=void 0===t?[]:t,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=Object(a.useState)(),n=Object(m.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(),o=Object(m.a)(i,2),s=o[0],u=o[1],p=Object(a.useCallback)((function(e){c(e)}),[]);return Object(a.useEffect)((function(){u(e(r))}),[r,e]),Object(a.useEffect)((function(){function t(){u(e(r))}return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[r,e]),[s,p]}(w),i=Object(m.a)(c,2),o=i[0],s=i[1],u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{columns:1,maxPinHeight:1,maxPinWidth:1},n=t.columns,a=t.maxPinHeight,r=t.maxPinWidth,c=Object(g.a)(new Array(n)).map((function(){return{height:0,pins:[]}}));return e.reduce((function(e,t){var n=e[0],c=1/0;e.forEach((function(e){e.height<c&&(c=e.height,n=e)}));var i=Math.min(t.height/t.width*r,a);return n.height+=i,n.pins.push(t),e}),c)}(n,{columns:o/P>>0||1,maxPinHeight:O,maxPinWidth:P});return r.a.createElement("div",{className:j.a.dashboard,ref:s},u.map((function(e,t){return r.a.createElement(_,{key:t,pins:e.pins})})))}function _(e){var t=e.pins,n=void 0===t?[]:t;return r.a.createElement("div",{className:j.a.column},n.map((function(e){var t=e.alt_description,n=e.id,a=e.urls;return r.a.createElement(k,{key:n,alt:t,id:n,src:a.regular})})))}function k(e){var t=e.alt,n=e.id,a=e.src;return r.a.createElement("figure",{key:n,className:j.a.pin},r.a.createElement("img",{alt:t,src:a}))}var I=!1;function y(e){var t=e.children,n=e.onLoad,r=e.threshold,c=void 0===r?0:r,i=Object(a.useState)(window.scrollY),o=Object(m.a)(i,2),p=o[0],l=o[1],d=Object(a.useState)(!1),f=Object(m.a)(d,2),h=f[0],v=f[1],b=Object(a.useState)(!1),g=Object(m.a)(b,2),w=g[0],x=g[1];return Object(a.useEffect)((function(){function e(){I||(window.requestAnimationFrame((function(){l(window.scrollY),I=!1})),I=!0)}return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),Object(a.useEffect)((function(){var e;p>0&&p>((e=document.body)&&e.clientHeight||0)-window.innerHeight-c?v(!0):v(!1)}),[p,w,c]),Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||w){e.next=5;break}return x(!0),e.next=4,n();case 4:x(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[h,n]),t}var H=n(20),N=n.n(H).a.create({baseURL:"https://api.unsplash.com/",headers:{"Accept-Version":"v1",Authorization:"Client-ID ".concat("8b710fdf3a84421688d4a67a45db46ea67f1c584720861ea8c7412a38fb9e471")}}),A={per_page:15};var S=n(21),C=n.n(S),L=parseInt(j.a.MAX_PIN_HEIGHT,10),M=v.createInstance({name:"imageStore"}),T=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={currentPage:1,pins:[]},n.loadCurrentPage=Object(u.a)(s.a.mark((function e(){var t,a,r,c,i,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Response,e.prev=1,e.next=4,s={page:n.state.currentPage},N.get("/photos",{params:Object.assign({},A,s)});case 4:t=e.sent,a=!0,r=!1,c=void 0,e.prev=8,i=t.data[Symbol.iterator]();case 10:if(a=(o=i.next()).done){e.next=17;break}return u=o.value,e.next=14,M.setItem(u.id,u);case 14:a=!0,e.next=10;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(8),r=!0,c=e.t0;case 23:e.prev=23,e.prev=24,a||null==i.return||i.return();case 26:if(e.prev=26,!r){e.next=29;break}throw c;case 29:return e.finish(26);case 30:return e.finish(23);case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(1),console.error(e.t1);case 36:return e.abrupt("return",t);case 37:case"end":return e.stop()}var s}),e,null,[[1,33],[8,19,23,31],[24,,26,30]])}))),n.loadNextPage=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState((function(e){return{currentPage:e.currentPage+1}}),Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loading page",n.state.currentPage),e.next=3,n.loadCurrentPage();case 3:(t=e.sent).data&&n.setPins(n.state.pins.concat(t.data));case 5:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),n.setPins=function(e){n.setState({pins:e})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],console.time("Store Read Time"),e.prev=2,e.next=5,M.iterate((function(e){t.push(e)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:if(console.timeEnd("Store Read Time"),!(t.length>0)){e.next=15;break}this.setPins(t),e.next=19;break;case 15:return e.next=17,this.loadCurrentPage();case 17:n=e.sent,this.setPins(n.data);case 19:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:C.a.app},r.a.createElement(y,{onLoad:this.loadNextPage,threshold:L},r.a.createElement(E,{pins:this.state.pins})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.b360c247.chunk.js.map